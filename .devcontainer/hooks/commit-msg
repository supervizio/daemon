#!/bin/bash
# Git commit-msg hook - Remove AI/Claude mentions from commit messages
# Installed automatically via postCreateCommand

COMMIT_MSG_FILE="$1"

if [[ -f "$COMMIT_MSG_FILE" ]]; then
    # Remove lines containing AI-related mentions
    sed -i \
        -e '/ðŸ¤– Generated with \[Claude Code\]/d' \
        -e '/Co-Authored-By:.*Claude/d' \
        -e '/Co-Authored-By:.*anthropic/d' \
        -e '/Co-Authored-By:.*noreply@anthropic\.com/d' \
        -e '/Generated by Claude/d' \
        -e '/Generated by AI/d' \
        -e '/AI-assisted/d' \
        -e 's/ *$//' \
        "$COMMIT_MSG_FILE"

    # Remove trailing empty lines
    sed -i -e :a -e '/^\n*$/{$d;N;ba' -e '}' "$COMMIT_MSG_FILE" 2>/dev/null || true
fi

exit 0
