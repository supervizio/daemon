# =============================================================================
# E2E Test Configuration: supervizio as PID1
# =============================================================================
# Manages nginx and redis as child services for container PID1 testing.
# =============================================================================

log:
  directory: /var/log/supervizio
  rotation:
    max_size_mb: 10
    max_age_days: 1
    max_backups: 3
    compress: false

services:
  # Nginx web server (HTTP health check target)
  # Using wrapper script because executor's strings.Fields()
  # doesn't handle quoted arguments in command strings
  - name: nginx
    command: /usr/local/bin/start-nginx.sh
    restart:
      policy: always

  # Redis in-memory store (TCP health check target)
  - name: redis
    command: redis-server --daemonize no --port 6379
    restart:
      policy: always
