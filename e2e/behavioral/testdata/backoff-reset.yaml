# Test config: Backoff reset after stability window
# Crasher runs for 4 seconds then crashes, stability window is 3 seconds
# After running > 3s stably, backoff should reset to initial delay
version: "1"

logging:
  base_dir: /var/log/supervizio
  defaults:
    timestamp_format: iso8601
    rotation:
      max_size: "10MB"
      max_files: 3

services:
  - name: crasher
    command: /usr/local/bin/crasher
    args:
      - "--crash-after=4"
      - "--exit=1"
    restart:
      policy: on-failure
      max_retries: 10
      delay: 500ms
      delay_max: 5s
      stability_window: 3s
